(function(){document.addEventListener("DOMContentLoaded",function(){function e(e){console.log("🔍 Looking for apartment:",e);const t=document.querySelector(`[data-apartment-id="${e}"]`);if(t){const n=t.querySelector(".apartment_modal-wrapper");n?(console.log("✅ Opening modal for apartment:",e),o(),n.classList.add("is-open")):console.error("❌ Modal wrapper not found for apartment:",e)}else console.error("❌ Apartment container not found with ID:",e)}function o(){const e=document.querySelectorAll(".apartment_modal-wrapper.is-open");e.forEach(e=>{e.classList.remove("is-open")}),console.log("🔒 Closed all modals")}function t(e){e.classList.remove("is-open"),console.log("🔒 Modal closed")}function n(){const e=document.querySelectorAll("[data-apartment-modal-toggle]");e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();const o=this.closest(".apartment_modal-wrapper");o&&t(o)})}),console.log(`🎯 Setup ${e.length} modal close handlers`)}function a(){const e=document.querySelectorAll(".apartment_overlay");e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();const o=this.closest(".apartment_modal-wrapper");o&&t(o)})}),console.log(`🎯 Setup ${e.length} overlay close handlers`)}window.addEventListener("message",function(o){o.data&&"openApartment"===o.data.type&&(console.log("📨 Received apartment ID from SVG:",o.data.apartmentId),e(o.data.apartmentId))}),document.addEventListener("keydown",function(e){"Escape"===e.key&&o()}),n(),a(),console.log("✅ LiveCPH Etageplan Listener initialized with modal support")})})();
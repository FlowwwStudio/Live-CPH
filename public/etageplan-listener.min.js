console.log("ðŸš€ Etageplan Listener script loaded"),document.addEventListener("DOMContentLoaded",function(){function e(e){console.log("ðŸ” Looking for apartment:",e);const o=document.querySelector(`[data-apartment-id="${e}"]`);if(o){const t=o.querySelector(".apartment_modal-wrapper");t?(console.log("âœ… Opening modal for apartment:",e),document.querySelectorAll(".apartment_modal-wrapper.is-open").forEach(e=>{e.classList.remove("is-open")}),console.log("ðŸ”’ Closed all modals (scroll unchanged)"),document.body.style.overflow="hidden",document.body.style.paddingRight=function(){const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);const o=document.createElement("div");e.appendChild(o);const t=e.offsetWidth-o.offsetWidth;return e.parentNode.removeChild(e),t}()+"px",console.log("ðŸš« Scroll disabled"),t.classList.add("is-open")):console.error("âŒ Modal wrapper not found for apartment:",e)}else console.error("âŒ Apartment container not found with ID:",e)}function o(){document.body.style.overflow="",document.body.style.paddingRight="",console.log("âœ… Scroll enabled")}function t(e){e.classList.remove("is-open"),o(),console.log("ðŸ”’ Modal closed")}console.log("ðŸ“„ DOM ready, initializing etageplan listener"),window.addEventListener("message",function(o){if(o.data&&"openApartment"===o.data.type){const t=o.data.apartmentId;console.log("ðŸ“¨ Received apartment ID from SVG:",t),e(t)}}),document.addEventListener("keydown",function(e){"Escape"!==e.key&&27!==e.keyCode||document.querySelectorAll(".apartment_modal-wrapper.is-open").length>0&&(document.querySelectorAll(".apartment_modal-wrapper.is-open").forEach(e=>{e.classList.remove("is-open")}),o(),console.log("ðŸ”’ Closed all modals"),console.log("ðŸ”’ ESC key pressed - closing modals"))}),function(){const e=document.querySelectorAll("[data-apartment-modal-toggle]");e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();const o=this.closest(".apartment_modal-wrapper");o&&t(o)})}),console.log(`ðŸŽ¯ Setup ${e.length} modal close handlers`)}(),function(){const e=document.querySelectorAll(".apartment_overlay");e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();const o=this.closest(".apartment_modal-wrapper");o&&t(o)})}),console.log(`ðŸŽ¯ Setup ${e.length} overlay close handlers`)}(),console.log("âœ… LiveCPH Etageplan Listener initialized with modal support")});